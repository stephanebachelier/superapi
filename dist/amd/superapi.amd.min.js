define("superapi/api",["exports"],function(a){"use strict";function b(a){this.config=a,this.api=Object.create(null);for(var b in a.services)Object.prototype.hasOwnProperty(this,b)||(this.api[b]=c(b).bind(this))}var c=function(a){return function(b){b=b||{};var c=b.data||{},d=b.params||{},e=b.query||{},f=b.callback||null,g=b.edit||null,h=b.timeout||2e4,i=this,j=this.request(a,c,d,e);g&&"function"==typeof g&&g(j);var k={},l=new Promise(function(a,b){k={resolve:a,reject:b}});return j.end(f?f:function(a){k[a.error?"reject":"resolve"](a)}),h&&(j.xhr.timeout=h,j.xhr.ontimeout=function(){j.aborted=!0;var a=new i.agent.Response(j);a.timeout=!0,a.error=!0,j.emit("abort",a)}),j.on("abort",function(a){k.reject(a)}),l}};b.prototype={paramsPattern:/:(\w+)/g,service:function(a){return this.config.services[a]},url:function(a){var b=this.config.baseUrl,c=this.service(a);if(c){var d;if("string"==typeof c&&(d=c),"object"==typeof c&&void 0!==c.path&&(d=c.path),!d)throw new Error("path is not defined for route $"+a);d.match(/^https?:\/\//)?b=d:b+="/"===d[0]?d:"/"+d}return b},replaceUrl:function(a,b){var c=a.match(this.paramsPattern);if(!c||!c.length)return a;for(var d=0,e=c.length;e>d;d+=1){var f=c[d],g=f.substring(1);b[g]&&(a=a.replace(f,b[g]))}return a},buildUrlQuery:function(a){if(!a)return"";var b;if("string"==typeof a)b=a;else{var c=[];for(var d in a)c.push(d+"="+a[d]);b=c.join("&")}return b?"?"+b:""},buildUrl:function(a,b,c){var d=this.url(a);return b&&(d=this.replaceUrl(d,b)),c&&(d+=this.buildUrlQuery(c)),d},request:function(a,b,c,d){var e=this.service(a),f=("string"==typeof e?"get":e.method||"get").toLowerCase();if("delete"===f&&(f="del"),!this.agent)throw new Error("missing superagent or any api compatible agent.");var g=this.agent[f];if(!g)throw new Error("Invalid method ["+e.method+"]");var h=g(this.buildUrl(a,c,d),b);return this._setHeaders(h,this.config.headers),this._setOptions(h,this.config.options),this._setOptions(h,e.options),this._setHeaders(h,e.headers),this._setHeaders(h,this.headers),this.config.withCredentials&&h.withCredentials(),h},addHeader:function(a,b){this.headers=this.headers||{},this.headers[a]=b},removeHeader:function(a){this.headers&&this.headers[a]&&delete this.headers[a]},_setHeaders:function(a,b){for(var c in b)a.set(c,b[c])},_setOptions:function(a,b){for(var c in b)a[c](b[c])}},a["default"]=b}),define("superapi",["./superapi/api","exports"],function(a,b){"use strict";function c(a){return new d(a)}var d=a["default"];c.prototype.Api=d,b["default"]=c});